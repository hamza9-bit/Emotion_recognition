<!DOCTYPE html>
<html lang="en">
  <head>
    <title>Emotion &mdash; Website Template by Colorlib</title>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, shrink-to-fit=no"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css"
      integrity="sha512-DTOQO9RWCH3ppGqcWaEA1BIZOC6xxalwEsw9c2QQeAIftl+Vegovlnee1c9QX4TctnWMn13TZye+giMm8e2LwA=="
      crossorigin="anonymous"
      referrerpolicy="no-referrer"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Mulish:wght@400;700;900&display=swap"
      rel="stylesheet"
    />

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='fonts/icomoon/style.css') }}"
    />

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/bootstrap.min.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/jquery-ui.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/owl.carousel.min.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/owl.theme.default.min.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/owl.theme.default.min.css') }}"
    />

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/jquery.fancybox.min.css') }}"
    />

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/bootstrap-datepicker.css') }}"
    />

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='fonts/flaticon/font/flaticon.css') }}"
    />
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='fonts/flaticon-covid/font/flaticon.css') }}"
    />

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/aos.css') }}"
    />

    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='css/style.css') }}"
    />
  </head>
  <body data-spy="scroll" data-target=".site-navbar-target" data-offset="300">
    <div id="overlayer"></div>
    <div class="loader">
      <div class="spinner-border text-primary" role="status">
        <span class="sr-only">Loading...</span>
      </div>
    </div>

    <div class="site-wrap">
      <div class="site-mobile-menu site-navbar-target">
        <div class="site-mobile-menu-header">
          <div class="site-mobile-menu-close mt-3">
            <span class="icon-close2 js-menu-toggle"></span>
          </div>
        </div>
        <div class="site-mobile-menu-body"></div>
      </div>

      <header
        class="site-navbar light js-sticky-header site-navbar-target"
        role="banner"
      >
        <div class="container">
          <div class="row align-items-center">
            <div class="col-6 col-xl-2">
              <div class="mb-0 site-logo">
                <a href="index.html" class="mb-0"
                  >Emotion<span class="text-primary">.</span>
                </a>
              </div>
            </div>

            <div class="col-12 col-md-10 d-none d-xl-block">
              <nav
                class="site-navigation position-relative text-right"
                role="navigation"
              >
                <ul
                  class="site-menu main-menu js-clone-nav mr-auto d-none d-lg-block"
                >
                  <li>
                    <a href="{{ url_for('index') }}" class="nav-link">Home</a>
                  </li>
                
                   
                      <li >
                        <a href="{{ url_for('symptoms') }}" class="nav-link" onclick="redirectToUpload()">Image Recognition</a>
                      </li>
                
                  <li class="active">
                    <a href="{{ url_for('VideoRecognition') }}" class="nav-link">Video Recognition</a>
                  </li>
                  <a href="{{ url_for('Realtime') }}" class="nav-link">Realtime Recognition</a>
                
                </ul>
              </nav>
            </div>

            <div
              class="col-6 d-inline-block d-xl-none ml-md-0 py-3"
              style="position: relative; top: 3px"
            >
              <a href="#" class="site-menu-toggle js-menu-toggle float-right"
                ><span class="icon-menu h3 text-black"></span
              ></a>
            </div>
          </div>
        </div>
      </header>

      <div class="hero-v1">
        <div class="container">
          <div class="row align-items-center">
            <div class="col-lg-6 mr-auto text-center text-lg-left">
              <span class="d-block subheading">Emotion Recognition</span>
              <h1 class="heading mb-3">Emotions</h1>
              <p class="mb-5">
                Lorem ipsum dolor sit amet, consectetur adipisicing elit. Vel a,
                nulla incidunt eaque sit praesentium porro consectetur optio!
              </p>
            </div>
            <div class="col-lg-6">
              <figure class="illustration-2">
                <img
                  src="{{ url_for('static', filename='images/fear-pana.png') }}"
                  alt="Image"
                  class="img-fluid"
                />
              </figure>
            </div>
            <div class="col-lg-6"></div>
          </div>
        </div>
      </div>

      <!-- MAIN -->

      <div class="site-section bg-primary-light">
        <div class="container">
          <div class="row mb-5">
            <div class="col-lg-7 mx-auto text-center">
              <h2 class="mb-4 section-heading">
                upload video here to check emotions
              </h2>
            </div>
          </div>
        </div>
        <!-- Dropzone Section -->
        <div class="frame">
          <div class="center">
            <form
              action="/video"
              method="post"
              enctype="multipart/form-data"
              id="uploadForm"
            >
            <div class="dropzone-container">
              <div class="dropzone" id="customDropzone">
                <label for="fileInput" class="custom-label">
                  <img style="cursor: pointer" src="http://100dayscss.com/codepen/upload.svg" class="upload-icon" />
                  <span style="cursor: pointer" class="upload-text">Choose a file or drag it here</span>
                </label>
                <input type="file" class="upload-input" name="file" id="fileInput" style="display: none" />
              </div>
            </div>

              <div class="d-flex justify-content-center mt-4">

                <button type="submit" class="btn btn-primary" id="uploadButton">
                  Check for emotion
                </button>
                <span class="spinner-icon" style="display: none"
                  ><i class="fa-solid fa-spinner"></i
                ></span>
              </div>
            </form>
        
          </div>
        </div>
      </div>
      <!-- End of Dropzone Section -->
    </div>
    <!-- .site-wrap -->

    <script src="{{ url_for('static', filename='js/jquery-3.3.1.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery-ui.js') }}"></script>
    <script src="{{ url_for('static', filename='js/popper.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/bootstrap.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/owl.carousel.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery.countdown.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery.easing.1.3.js') }}"></script>
    <script src="{{ url_for('static', filename='js/aos.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery.fancybox.min.js') }}"></script>
    <script src="{{ url_for('static', filename='js/jquery.sticky.js') }}"></script>
    <script src="{{ url_for('static', filename='js/isotope.pkgd.min.js') }}"></script>

    <script src="{{ url_for('static', filename='js/main.js') }}"></script>
    <!-- Include Dropzone.css and Dropzone.js -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.2/min/dropzone.min.css"
      integrity="sha384-Xq1tATfAe4tlfY5gsU9LVlVm+9g8cEWE0ISdKPhI+9D8eZ/jCr7pybBmsXyQJ8yR"
      crossorigin="anonymous"
    />
    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/dropzone/5.9.2/min/dropzone.min.js"
      integrity="sha384-dvU/BDd8a0s0Z0F2ByMsLe92Ij4YXLfP1wBXpnez6sBBKnAA5aX8G3xXuiUpgNUC"
      crossorigin="anonymous"
    ></script>

    <script>
  

      document.getElementById('uploadForm').addEventListener('submit', function (e) {
        event.preventDefault();
          var buttonContainer = document.getElementById("buttonContainer");
          var button = document.getElementById("uploadButton");
          var spinnerIcon = document.querySelector(".spinner-icon");

          // Show the spinner icon and hide the button
          spinnerIcon.style.display = "inline-block";
          button.style.display = "none";
    var form = e.target;
    var formData = new FormData(form);

    fetch('/video', {
        method: 'POST',
        body: formData
    })
    .then(response => response.json())
    .then(data => {
        console.log(data);
    
    })
    .catch(error => {
        console.error('Error:', error);

     
    }).finally(() => {
      spinnerIcon.style.display = "none";
              button.style.display = "inline-block";
             });
});
    
      document
        .getElementById("fileInput")
        .addEventListener("change", function () {
          readURL(this);
        });

      function readURL(input) {
        if (input.files && input.files[0]) {
          var reader = new FileReader();

          reader.onload = function (e) {
            var dropzone = document.getElementById("customDropzone");
            //dropzone.style.backgroundImage = "none";
            dropzone.style.backgroundImage = "url(" + e.target.result + ")";
            dropzone.style.backgroundSize = "contain";
            dropzone.style.border = "none";
            dropzone.style.padding = "0";
          };

          reader.readAsDataURL(input.files[0]);
        }
      }
      // Dropzone.autoDiscover = false;
      // $(document).ready(function () {
      //   var myDropzone = new Dropzone("#myDropzone", {
      //     paramName: "file",
      //     maxFilesize: 2, // MB
      //     acceptedFiles: ".png, .jpg, .jpeg",
      //     addRemoveLinks: true,
      //     init: function () {
      //       this.on("success", function (file, response) {
      //         // Display the uploaded image
      //         var uploadedImagesDiv = document.getElementById("uploadedImages");
      //         var img = document.createElement("img");
      //         img.src = response.url;
      //         img.classList.add("img-thumbnail", "mr-2", "mb-2");
      //         uploadedImagesDiv.appendChild(img);
      //       });
      //       this.on("addedfile", function (file) {
      //   // Disable readURL for Dropzone uploads
      //   document.getElementById("customDropzone").style.backgroundImage = "none";
      // });
      //     },
          
      //   });
      // });
    </script>
  </body>
</html>
